import 'package:auth_app/functions/handling_data.dart';
import 'package:auth_app/services/api/post_get_api.dart';
import 'package:auth_app/classes/shared_preference.dart';
import 'package:auth_app/services/api_service.dart';

class GetTransferDetailsApi {
  final PostGetPage postGetPage;

  GetTransferDetailsApi(this.postGetPage);

  //====================== Ø¬Ù„Ø¨ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª Ù…Ø¹ ØªÙ‚Ø³ÙŠÙ… Ø§Ù„ØµÙØ­Ø§Øª =============================== //
  //////// ğŸŸ© //////////Ø¬Ù„Ø¨ ØªÙØ§ØµÙŠÙ„ ØªØ­ÙˆÙŠÙ„ Ù…Ø¹ÙŠÙ† Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… transferId
  Future<Map<String, dynamic>> getTransferDetails(int transferId) async {
    String token = Preferences.getString('auth_token');

    if (token.isEmpty) {
      return {'status': 'error', 'message': 'ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹'};
    }

    logMessage('Transfer', 'Getting transfer details for ID: $transferId');

    return handleEitherResult(
      postGetPage.getDataWithToken(
        ApiServices.getTransferDetails(transferId),
        token,
      ),
      'Transfer Details Retrieved Successfully',
      'ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªØ­ÙˆÙŠÙ„',
    );
  }
}
